@{
    ViewBag.Title = "药品明细";
    var X = Html.X();
}

@section header{
    <script type="text/javascript">
        var SelectedRecord = function (e, row) {
            if (row[0]) {
                this.up('form').getForm().reset();
                this.up('form').getForm().loadRecord(row[0]);
            }
        };
    </script>
}

@(X.Viewport().Layout(LayoutType.Fit).Items(
      X.FormPanel().ID("FP_Main").Layout(LayoutType.Border).StyleSpec("border:1px solid #DFDFDF;").Items(
          X.GridPanel().ID("GP_Left").Region(Region.West).Width(460)
            .StyleSpec("border:1px solid #DFDFDF;border-left:0px;border-right:0px;")
            .Store(X.Store().ID("S_Left").Parameters(new
            {
                BeginTime = JRawValue.From("App.DF_BeginTime.getValue() == null ? null : App.DF_BeginTime.getValue()"),
                EndTime = JRawValue.From("App.DF_EndTime.getValue() == null ? null : App.DF_EndTime.getValue()"),
                Take = JRawValue.From("App.CB_Take.getValue() == null ? null : App.CB_Take.getValue()")
            }
            ).Proxy(X.AjaxProxy().Url(Url.Action("GetList"))
            .Reader(X.JsonReader().RootProperty("data").TotalProperty("total")))).ColumnModel(
                X.RowNumbererColumn().Align(Alignment.Center).Text("序号").Width(50),
                X.Column().Text("药品名称").DataIndex("F_1").Filter(X.StringFilter().EmptyText("请输入药品名称")).Width(180),
                X.DateColumn().Text("录入时间").DataIndex("F_CreatorTime").Format("yyyy-MM-dd HH:mm:ss").Width(150))
            .View(X.GridView().EnableTextSelection(true).StripeRows(true).LoadingText("正在努力加载中"))
            .Plugins(X.CellEditing(), X.GridFilters().MenuFilterText("查询")).Listeners(l => l.SelectionChange.Fn = "SelectedRecord"),
          X.FormPanel().ID("FP_Right").StyleSpec("border:1px solid #DFDFDF;border-right:0px;").AutoScroll(true)
            .Layout(LayoutType.Form).Region(Region.Center).BodyStyle("overflow-x:visible;overflow-y:hidden").Items(
                X.FieldSet().Title("基本信息").FieldDefaults(fd => { fd.LabelAlign = LabelAlign.Right; fd.LabelWidth = 90; })
                .Layout(LayoutType.Table).LayoutConfig(new TableLayoutConfig() { Columns = 3 }).PaddingSpec("3").Items(
                    X.TextField().FieldLabel("识别代码").Name("F_1").MarginSpec("10px 10px 0px 0px")
                    .AllowBlank(false).AutoFocus(true).MaxLength(17).MinLength(17),
                    X.ComboBox().FieldLabel("号牌类型").Name("F_2").Text("蓝牌").AllowBlank(false).
                    MarginSpec("10px 10px 0px 0px").Items(
                        X.ListItem().Text("黄牌"),
                        X.ListItem().Text("蓝牌")),
                    X.ComboBox().FieldLabel("使用性质").Name("F_3").Text("非营运").MarginSpec("10px 10px 0px 0px").AllowBlank(false).Items(
                        X.ListItem().Text("非营运"),
                        X.ListItem().Text("营运"),
                        X.ListItem().Text("货运"),
                        X.ListItem().Text("危化品运输")),
                    X.ComboBox().FieldLabel("车身颜色").Name("F_4").MarginSpec("10px 10px 10px 0px").AllowBlank(false).Items(
                        X.ListItem().Text("黑色"),
                        X.ListItem().Text("红色"),
                        X.ListItem().Text("黄色"),
                        X.ListItem().Text("蓝色"),
                        X.ListItem().Text("绿色"),
                        X.ListItem().Text("灰色"),
                        X.ListItem().Text("白色"),
                        X.ListItem().Text("棕色"),
                        X.ListItem().Text("粉色"),
                        X.ListItem().Text("紫色")),
                    X.NumberField().FieldLabel("核载人数").Name("F_5").MarginSpec("10px 10px 10px 0px").AllowBlank(false).MinValue(0),
                    X.ComboBox().FieldLabel("车辆类型").Name("F_40").MarginSpec("10px 10px 10px 0px").Text("小型汽车").AllowBlank(false).Items(
                        X.ListItem().Text("大型汽车"),
                        X.ListItem().Text("小型汽车"),
                        X.ListItem().Text("使馆汽车"),
                        X.ListItem().Text("领馆汽车"),
                        X.ListItem().Text("境外汽车"),
                        X.ListItem().Text("外籍汽车"),
                        X.ListItem().Text("普通摩托车"),
                        X.ListItem().Text("轻便摩托车"),
                        X.ListItem().Text("使馆摩托车"),
                        X.ListItem().Text("领馆摩托车"),
                        X.ListItem().Text("境外摩托车"),
                        X.ListItem().Text("外籍摩托车"),
                        X.ListItem().Text("低速车"),
                        X.ListItem().Text("拖拉机"),
                        X.ListItem().Text("挂车"),
                        X.ListItem().Text("教练汽车"),
                        X.ListItem().Text("教练摩托车"),
                        X.ListItem().Text("试验汽车"),
                        X.ListItem().Text("试验摩托车"),
                        X.ListItem().Text("临时入境汽车"),
                        X.ListItem().Text("临时入境摩托车"),
                        X.ListItem().Text("临时行驶车"),
                        X.ListItem().Text("警用汽车"),
                        X.ListItem().Text("警用摩托"),
                        X.ListItem().Text("原农机号牌"),
                        X.ListItem().Text("香港入出境车"),
                        X.ListItem().Text("澳门入出境车"),
                        X.ListItem().Text("武警号牌"),
                        X.ListItem().Text("军队号牌"),
                        X.ListItem().Text("无号牌"),
                        X.ListItem().Text("假号牌"),
                        X.ListItem().Text("挪用号牌"),
                        X.ListItem().Text("其他号牌")),
                    X.TextField().FieldLabel("备注说明").Name("F_Remakes").MarginSpec("10px 10px 10px 0px")),
                X.FieldSet().Title("业务类型").LayoutConfig(new TableLayoutConfig() { Columns = 6 }).Layout(LayoutType.Table)
                .PaddingSpec("3").Items(
                    X.Checkbox().BoxLabel("注册登记").Name("F_6").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("转入").Name("F_7").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("转移登记").Name("F_8").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("变更迁出").Name("F_9").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("变更车身颜色").Name("F_10").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("变更车身或车架").Name("F_11").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("变更发动机").Name("F_12").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("变更使用性质").Name("F_13").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("重新打刻VIN").Name("F_14").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("重新打刻发动机号").Name("F_15").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("加装/拆除操纵辅助装置").Name("F_16").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("更换整车").Name("F_17").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("申领登记证书").Name("F_18").MarginSpec("20px 10px 10px 0px"),
                    X.Checkbox().BoxLabel("补领登记证书").Name("F_19").MarginSpec("20px 10px 10px 0px"),
                    X.Checkbox().BoxLabel("监销").Name("F_20").MarginSpec("20px 10px 10px 0px"),
                    X.Checkbox().BoxLabel("其他").Name("F_21").MarginSpec("20px 10px 10px 0px")),
                X.FieldSet().Title("检测项目").LayoutConfig(new TableLayoutConfig() { Columns = 4 }).Layout(LayoutType.Table)
                .PaddingSpec("3").Items(
                    X.Checkbox().BoxLabel("车辆识别代号").Name("F_22").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("发动机型号/号码").Name("F_23").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("车身品牌/型号").Name("F_24").MarginSpec("10px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("号牌/车辆外观形状").Name("F_26").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("轮胎完好情况").Name("F_27").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("安全带、三角警告牌").Name("F_28").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("外廊尺寸、轴数").Name("F_29").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("整备质量").Name("F_30").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("轮胎规格").Name("F_31").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("侧后部防护装置").Name("F_32").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("车身反光标识").Name("F_33").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("灭火器").Name("F_34").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("行驶记录装置、车内外录像监控装置").Name("F_35").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("应急出口/应急锤、乘客门").Name("F_36").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("外部标识/文字、喷涂").Name("F_37").MarginSpec("20px 10px 0px 0px"),
                    X.Checkbox().BoxLabel("标志灯具、警报器").Name("F_38").MarginSpec("20px 10px 10px 0px"),
                    X.Checkbox().BoxLabel("检验合格证明").Name("F_39").MarginSpec("20px 10px 10px 0px")),
                X.FieldSet().Title("区间合计").FieldDefaults(fd => { fd.LabelAlign = LabelAlign.Right; fd.LabelWidth = 90; })
                 .LayoutConfig(new TableLayoutConfig() { Columns = 2 }).Layout(LayoutType.Table).PaddingSpec("3").Items(
                        X.TextField().ID("TF_NewCarCount").FieldLabel("新车数量").MarginSpec("20px 0px 20px 0px").Editable(false).ReadOnly(true),
                        X.TextField().ID("TF_OldCarCount").FieldLabel("旧车数量").MarginSpec("20px 0px 20px 0px").Editable(false).ReadOnly(true))))
        .TopBar(X.Toolbar().Items(
            X.DateField().ID("DF_BeginTime").FieldLabel("开始时间").Format("yyyy-MM-dd").LabelWidth(60).Width(180)
            .Margin(7).Text(@DateTime.Now.ToString()).MaxDate(@DateTime.Now).AutoDataBind(true).Editable(false)
            .Listeners(ls => ls.Select.Handler = "#{S_Left}.reload();"),
            X.DateField().ID("DF_EndTime").FieldLabel("截至时间").Format("yyyy-MM-dd").LabelWidth(60).Width(180)
            .Margin(7).Text(@DateTime.Now.ToString()).MaxDate(@DateTime.Now).AutoDataBind(true).Editable(false)
            .Listeners(ls => ls.Select.Handler = "#{S_Left}.reload();"),
             X.ComboBox().ID("CB_Take").Width(60).Text("5").Items(
                    X.ListItem().Text("2000"),
                    X.ListItem().Text("1000"),
                    X.ListItem().Text("500"),
                    X.ListItem().Text("200"),
                    X.ListItem().Text("100"),
                    X.ListItem().Text("50"),
                    X.ListItem().Text("20"),
                    X.ListItem().Text("10"),
                    X.ListItem().Text("5"))
            .Listeners(ls => ls.Select.Handler = "#{S_Left}.reload();"),
            X.Button().Text("新增").Icon(Icon.Add).Width(80),
            X.Button().Text("保存").Icon(Icon.Disk),
            X.Button().Text("删除").Width(80).Icon(Icon.Delete),
            X.Button().Text("清空").Icon(Icon.Cancel).OnClientClick("#{FP_Right}.reset();"),
            X.Button().Text("刷新").Icon(Icon.Reload).Width(80).OnClientClick("#{S_Left}.reload();")))))
